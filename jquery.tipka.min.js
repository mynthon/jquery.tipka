(function(e){var t="-99999999999em",n=function(){var t=this.options,n=this.content,r=this.holder,i=e(this.trigger),s=r.css("display"),o=parseInt(t.maxWidth),u=n.outerWidth()-n.width();n.children().each(function(){e(this).outerWidth()>o&&(o=e(this).outerWidth()+u)}),r.css({display:"block",width:"auto","max-width":o});var a="",f=0,l=0,c=0,h=0,p="t",d=e(window).height(),v=e(window).width(),m=e(window).scrollTop(),g=e(window).scrollLeft(),y=parseInt(i.offset().top),b=parseInt(i.offset().left),w=i.outerHeight(),E=i.outerWidth(),S=n.outerWidth(),x=n.outerHeight(),T=18,N=.25,C=t.edgeOffset,k=y-C-T-x,L=y+w/2-x*N,A=y+w/2-x*(1-N),O=y+w+C+T,M=y+w/2-x/2,_=b-C-T-S,D=b+E/2-S*(1-N),P=b+E/2-S*N,H=b+E+C+T,B=b+E/2-S/2,j=S*x,F=function(e,t){var n=Math.min(0,Math.max(-x,t-m)),r=Math.min(0,Math.max(-S,v-e-S)),i=Math.min(0,Math.max(-x,m+d-t-x)),s=Math.min(0,Math.max(-S,e-g));return 2*j-(j+(n+i)*x)-(j+(s+r)*S)},I={t:F(B,k),r:F(H,M),b:F(B,O),l:F(_,M),tr:F(P,k),rt:F(H,L),rb:F(H,A),br:F(P,O),bl:F(D,O),lb:F(_,A),lt:F(_,L),tl:F(D,k)};(function(){var e=Infinity,n="",r,i=t.defaultPosition.split(",");if(t.smartPosition==="defaults"){for(r in i)if(I[i[r]]===0){a=i[r];break}a===""&&(a=i[0])}else if(t.smartPosition==="findAnySpot"){for(r in I)if(I[r]===0){a=r;break}a===""&&(a=i[0])}else if(t.smartPosition==="defaultsBestFit"){for(r in i)I[i[r]]<e&&(e=I[i[r]],n=i[r]);a=n}else if(t.smartPosition==="bestFit"){for(r in I)I[r]<e&&(e=I[r],n=r);a=n}a===""&&(a="t")})(),a=="t"?(f=y-C-T-x,l=b+E/2-S/2,c=x-1,h=S/2-T/2,p="t"):a=="r"?(f=y+w/2-x/2,l=b+E+C+T,c=x/2-T/2,h=0,p="r"):a=="b"?(f=y+w+C+T,l=b+E/2-S/2,c=-T+1,h=S/2-T/2,p="b"):a=="l"?(f=y+w/2-.5*x,l=b-C-T-S,c=x/2-T/2,h=S-1,p="l"):a=="tr"?(f=y-C-T-x,l=b+E/2-N*S,c=x-1,h=S*N-T/2,p="tr"):a=="rt"?(f=y+.5*w-N*x,l=b+E+C+T,c=x*N-T/2,h=0,p="rt"):a=="rb"?(f=y+w/2-(1-N)*x,l=b+E+C+T,c=x*(1-N)-T/2,h=0,p="rb"):a=="br"?(f=y+w+C+T,l=b+E/2-N*S,c=-T+1,h=S*N-T/2,p="br"):a=="bl"?(f=y+w+C+T,l=b+E/2-(1-N)*S,c=-T+1,h=S*(1-N)-T/2,p="bl"):a=="lb"?(f=y+w/2-(1-N)*x,l=b-C-T-S,c=x*(1-N)-T/2,h=S-1,p="lb"):a=="lt"?(f=y+w/2-N*x,l=b-C-T-S,c=x*N-T/2,h=S-1,p="lt"):a=="tl"&&(f=y-C-T-x,l=b+E/2-(1-N)*S,c=x-1,h=S*(1-N)-T/2,p="tl");var q=r.width();r.css({width:q,"margin-top":f,"margin-left":l,display:s}).removeClass(r.attr("data-tipkaclass")).addClass("tip_"+p).attr("data-tipkaclass","tip_"+p),this.arrow.css({"margin-left":h,"margin-top":c})};e.tipkaTipDefaults={addClass:"",activation:"hover",keepAlive:!1,maxWidth:"200px",maxHeight:null,edgeOffset:3,defaultPosition:"b",smartPosition:"defaultsBestFit",keepOnTip:!0,delay:400,fadeIn:200,fadeOut:50,attribute:"title",content:!1,enter:function(){},exit:function(){}};var r=function(e,t){this.id="tiphld"+ +(new Date)+""+Math.round(Math.random()*1e6),this.idSel="."+this.id,this.trigger=e,this.holder=null,this.content=null,this.arrow=null,this.options=t,this.cloto,this.clotms=200,this.init()};r.prototype={init:function(){var n=this.options,r=this;e(".tipka_holder"+this.idSel).length>0&&this.holder.stop().remove(),this.holder=e('<div class="tipka_holder '+this.id+" "+n.addClass+'" style="min-width:40px; position:absolute; top:0; left:0; display:block; margin-left:'+t+";max-width:"+n.maxWidth+';"></div>'),this.content=e('<div class="tipka_content"></div>'),this.arrow=e('<div class="tipka_arrow" style="position:absolute;"><div class="tipka_arrow_outer"></div><div class="tipka_arrow_inner"></div></div>'),this.holder.attr("data-tipkaclass","").append(this.content).prepend(this.arrow),n.maxHeight&&this.content.css({maxHeight:n.maxHeight,overflow:"auto"})},open:function(){var e=this.isAttached(),t=this.options;clearTimeout(this.cloto),e||(this.attach(),n.call(this),this.holder.hide(),this.holder.css({opacity:0}));var r=(1-parseFloat(this.holder.css("opacity")||0))*t.fadeIn;this.holder.stop(!0,!1).fadeTo(r,1)},close:function(){var e=this,n=this.options,r=this.holder;this.cloto=setTimeout(function(){r.stop(!0,!1).fadeTo(n.fadeOut,0,function(){e.detach(),r.css({display:"block",marginLeft:t,marginTop:t})})},this.clotms)},hideByMargin:function(){this.holder.css({"margin-top":t,"margin-left":t})},attach:function(){var t=this,n=this.holder,r=this.isAttached();r||(e("body").append(n),this.options.keepOnTip&&(n.off("mouseover.tipka").on("mouseover.tipka",function(){t.open()}),n.off("mouseout.tipka").on("mouseout.tipka",function(){t.close()})))},detach:function(){e(this.idSel).remove()},isAttached:function(){return e(this.idSel).length>0},setContent:function(t){var r=this,i=e("<div />").html(t);i.find("img").hide(),this.content.html(i.html());var s=this.content.find("img");s.each(function(){var t=e(this),i=new Image;i.onload=function(){r.hideByMargin(),t.show(),n.call(r)},i.onerror=function(){r.hideByMargin(),t.show(),n.call(r)},i.src=e(this).attr("src")})}};var i={init:function(t){var i=t;return this.each(function(){function l(){t.data("tipPanel")||(t.data("tipPanel",new r(s,u)),f=t.data("tipPanel"))}function c(){var e=u.content,n=u.attribute,r="";return typeof e=="string"?r=e:typeof e=="function"?r=e(t):e instanceof jQuery?r=e.html():n&&(r=t.attr(n)),r}var t=e(this),s=this,o=null;if(t.hasClass(".tipka_hastip"))return!0;s.options={},e.extend(s.options,e.tipkaTipDefaults,i);var u=s.options;t.addClass("tipka_hastip");var a="",f=null;this.updateContent=function(e){console.log("BACKWARD COMPATIBILITY: updateContent"),f.setContent(e),n.call(f)};var h=function(e){e.preventDefault(),e.stopPropagation(),o=setTimeout(function(){s.open()},f&&f.isAttached()?0:u.delay)};this.open=function(){l(),f.setContent(c()),a=t.attr("title"),t.attr("title",""),f.open()};var p=function(e){clearTimeout(o),f&&!u.keepAlive&&f.close(),a&&t.attr("title",a)};this.close=function(e){f&&f.close(),a&&t.attr("title",a)},u.activation!=="elsewhere"&&(u.activation==="click"?(t.on("click",function(e){h(e)}),t.on("mouseout",function(){p()})):u.activation==="hover"?(t.on("mouseover",function(e){return h(e),!1}),t.on("mouseout",function(){p()})):u.activation==="focus"&&(t.on("focus",function(e){h(e)}),t.on("blur",function(){p()})))})},show:function(){return this.each(function(){console.log("deprecated show(), use open() instead"),this.open()})},hide:function(){return this.each(function(){console.log("deprecated hide(), use close() instead"),this.close()})},open:function(){return this.each(function(){this.open()})},close:function(){return this.each(function(){this.close()})},updateContent:function(t){return this.each(function(){var r=e(this).data("tipPanel");r.setContent(t),n.call(r)})}};e.fn.tipka=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.tipka")}})(jQuery);